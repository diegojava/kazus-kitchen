---
import "../styles/global.css";

const { title = "Kazu Astro" } = Astro.props;
const description = "Descubre Kazu’s Kitchen, restaurante japonés en Polanco, CDMX con platos tradicionales, sushi y nigiri de la chef Kazu Kumoto.";
const image = "https://kazuskitchen.com/_astro/hero.BisIgASB_ZdYQvb.webp";
const url = "https://kazuskitchen.com/";
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Unica+One&display=swap"
      rel="stylesheet"
    />
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />
    <meta property="og:url" content={url} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content={image} />
  </head>
  <body class="bg-white text-zinc-900">
    <!-- Topbar mobile -->
    <header
      class="sticky top-0 z-20 border-b bg-white/90 backdrop-blur md:hidden"
    >
      <d class="mx-auto flex max-w-6xl gap-3 px-4 py-3 justify-between">
        <a href="/" class="block">
          <img
            src="/logo.png"
            alt="Kazu Kitchen"
            class="w-24 opacity-90"
          />
        </a>
        <button
          id="openMenu"
          type="button"
          class="inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm"
          aria-label="Abrir menú"
        >
          <span class="text-lg leading-none">☰</span>
          <span class="uppercase tracking-[0.18em]">Menú</span>
        </button>
      </d>
    </header>

    <!-- Overlay mobile -->
    <div id="overlay" class="fixed inset-0 z-30 hidden bg-black/40 md:hidden">
    </div>

    <!-- Sidebar -->
    <aside
      [scrollbar-gutter:stable]
      id="sidebar"
      class="fixed left-0 top-0 z-40 h-screen w-[280px] -translate-x-[105%] overflow-y-auto border-r border-zinc-200 bg-white px-6 py-7 transition-transform md:translate-x-0"
      aria-label="Navegación"
    >
      <slot name="sidebar" />
    </aside>

    <!-- Content (offset en desktop) -->
    <main class="min-h-screen md:ml-[280px]">
      <slot />
    </main>

    <script is:inline>
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const openBtn = document.getElementById("openMenu");

      const openMenu = () => {
        sidebar?.classList.remove("-translate-x-[105%]");
        overlay?.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      };

      const closeMenu = () => {
        sidebar?.classList.add("-translate-x-[105%]");
        overlay?.classList.add("hidden");
        document.body.style.overflow = "";
      };

      openBtn?.addEventListener("click", openMenu);
      overlay?.addEventListener("click", closeMenu);
      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeMenu();
      });

      sidebar?.addEventListener("click", (e) => {
        const el = e.target;
        if (el?.closest?.("[data-nav]")) closeMenu();
      });
    </script>
  </body>
</html>
